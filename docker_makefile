MAKE = make BR2_EXTERNAL=$(shell pwd)/br_external -C buildroot

.PHONY: default clean save menuconfig ml pid rebuild deploy

default: ml

clean:
	rm -rf artifacts/*

save:
	${MAKE} savedefconfig

menuconfig:
	${MAKE} menuconfig

ml:
	${MAKE} ml_autobalancer_defconfig
	${MAKE} autobalancer-ml-rebuild motor-driver-rebuild all

pid:
	${MAKE} pid_autobalancer_defconfig
	${MAKE} autobalancer-pid-rebuild motor-driver-rebuild all

.DEFAULT:
	${MAKE} "$@"

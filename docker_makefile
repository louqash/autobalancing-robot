MAKE = make BR2_EXTERNAL=$(shell pwd)/br_external -C buildroot

.PHONY: default clean save menuconfig ml pid rebuild deploy

default: ml

clean:
	rm -rf artifacts/*

save:
	${MAKE} savedefconfig

menuconfig:
	${MAKE} menuconfig

config:
	${MAKE} autobalancer_defconfig

ml: config
	${MAKE} autobalancer-ml-rebuild

pid: config
	${MAKE} autobalancer-pid-rebuild

motor_driver: config
	${MAKE} motor-driver-rebuild

all: config
	${MAKE} autobalancer-pid-rebuild autobalancer-ml-rebuild motor-driver-rebuild all

.DEFAULT:
	${MAKE} "$@"
